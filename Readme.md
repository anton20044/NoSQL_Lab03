Лабораторная работа №3 по курсу NoSQL.

Задание:
	- построить шардированный кластер из 3 кластерных нод( по 3 инстанса с репликацией) и с кластером конфига(3 инстанса);
	- добавить балансировку, нагрузить данными, выбрать хороший ключ шардирования, посмотреть как данные перебалансируются между шардами;
	- поронять разные инстансы, посмотреть, что будет происходить, поднять обратно. Описать что произошло.
	- настроить аутентификацию и многоролевой доступ;

Решение:

1) Развернуто 13 виртуальных машин в минимальной конфигурации: 9 ВМ под шарды (3 набора реплик по 3 инстанса СУБД), 3 ВМ под кластер конфигурации 
	и 1 ВМ под процесс mongos
2) Шардированный кластер состоит из 3 шардов (shard_a, shard_b, shard_c): 
	- shard_b состоит из 3 инстансов mongoDB (запущены с параметрами --shardsvr --replSet shard_b --bind_ip_all)
	- shard_a и shard_c состоят из 2 инстансов mongoDB и одного арбитра mongoDB. Запущены с теми же параметрами что и shard_b, отличаются только replSet
	- сервера конфигурации запущены с параметрами  --configsvr --replSet configRS --bind_ip 0.0.0.0
	- сервер с процессом mongos запущен с параметрами --configdb configRS/192.168.50.134:27017,192.168.50.135:27017,192.168.50.136:27017
3) При добавлении шардов (в состов которых входит арбитр) понижен консенсус записи с 2 до 1
4) Конфигурация кластера отображена на рисунке "Конфигурация шардированного кластера"
5) Создана коллекция comp, в нее загружен датасет с данными о компаниях (https://github.com/ozlerhakan/mongodb-json-files/blob/master/datasets/companies.json)
6) На коллекции создал индекс для шардирования по году основания компании и порядковому номеру документа (founded_year: "hashed", _id: 1)
7) Включил разделение БД и разделение коллекции comp (founded_year: "hashed", _id: 1)
8) СУБД разделил коллекцию и перенес чанки (см рисунок 1)
9) Произвел выключение ВМ первичных реплик в шардах, набор реплик переключился на вторичные реплики. При выборке данных через mongos прерывания не было.
10) После включения выключенных ВМ, СУБД на них поднялись и вернулись к своим наборам реплик в качестве вторичных реплик.
11) Создал трех пользователей reader, writer, root (с правом чтения все БД, с правом записи во все БД и с правом root). Создал на всех наборах реплик.
12) Включил авторизацию и проверил права доступа.